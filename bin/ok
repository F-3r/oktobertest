#!/usr/bin/env ruby

puts 'usage: ok [-r lib] [-s scope] [-t test] [-v] file ...' if ARGV.empty?

require 'clap'
require_relative '../lib/oktobertest'

files = Clap.run ARGV,
  '-r' => ->(file) { require File.expand_path file },
  '-s' => ->(name) { Oktobertest.options[:run_scope] = name },
  '-t' => ->(name) { Oktobertest.options[:run_test] = name },
  '-v' => -> { puts Oktobertest::VERSION }

Oktobertest.run files if files.any?
